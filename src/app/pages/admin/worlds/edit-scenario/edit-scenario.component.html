<game-header [leftUrl]="['/admin', 'world', worldId, 'scenarios']" leftTitle="&lt; Escenarios" title="Editar escenario" [rightUrl]="['/admin','logout']" rightTitle="Salir"></game-header>

<div class="edit-scenario-header">
	<div>
		<label for="show-debug">Debug</label>
		<input type="checkbox" id="show-debug" [(ngModel)]="showDebug">
	</div>
</div>

<div class="edit-scenario-container">
	<div class="edit-scenario">
		<div *ngFor="let row of scenario" class="edit-scenario-row">
			<div *ngFor="let cell of row" class="edit-scenario-cell" [ngClass]="{'debug': showDebug}" (click)="openCell(null, cell)" [ngStyle]="{'background': cell.backgroundStyle}">
				<span>{{cell.x}} - {{cell.y}}</span>
			</div>
		</div>
	</div>
</div>

<div class="cell-detail" [ngClass]="{'cell-detail-show': showCellDetail}">
	<div class="box">
		<div class="header">
			Casilla {{loadedCell.x}} - {{loadedCell.y}}
			<a href="#" (click)="openCell($event)">X</a>
		</div>
		<div class="body">
			<div class="cell-option">
				<header>Fondo</header>
				<main>
					<img [src]="loadedCell.backgroundAssetUrl" (click)="openBackgroundPicker()">
					<a href="#" *ngIf="loadedCell.idBackground!=null" (click)="deleteBackground($event)">
						<img src="/assets/cant-cross.svg">
					</a>
				</main>
				<footer>
					{{loadedCell.backgroundName}}
				</footer>
			</div>
			<div class="cell-option">
				<header>Objeto</header>
				<main>
					<img [src]="loadedCell.scenarioObjectAssetUrl" (click)="openScenarioObjectPicker()">
					<a href="#" *ngIf="loadedCell.idScenarioObject!=null" (click)="deleteScenarioObject($event)">
						<img src="/assets/cant-cross.svg">
					</a>
				</main>
				<footer>
					{{loadedCell.scenarioObjectName}}
				</footer>
			</div>
			<div class="cell-option">
				<header>Personaje</header>
				<main>
					<img [src]="loadedCell.characterAssetUrl" (click)="openCharacterPicker()">
					<a href="#" *ngIf="loadedCell.idCharacter!=null" (click)="deleteCharacter($event)">
						<img src="/assets/cant-cross.svg">
					</a>
				</main>
				<footer>
					{{loadedCell.characterName}}
				</footer>
			</div>
		</div>
		<div class="footer">
			<button (click)="saveCell()" *ngIf="!savingCell">Continuar</button>
			<button disabled="disabled" *ngIf="savingCell">Guardando...</button>
		</div>
	</div>
</div>

<game-background-picker #backgroundPicker (selectBackgroundEvent)="selectedBackground($event)"></game-background-picker>
<game-scenario-object-picker #scenarioObjectPicker (selectScenarioObjectEvent)="selectedScenarioObject($event)"></game-scenario-object-picker>
<game-character-picker #characterPicker (selectCharacterEvent)="selectedCharacter($event)"></game-character-picker>
